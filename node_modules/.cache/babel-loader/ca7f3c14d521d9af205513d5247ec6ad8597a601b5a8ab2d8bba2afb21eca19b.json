{"ast":null,"code":"import React,{useState,useEffect}from'react';import DataTable from'react-data-table-component';import axios from'axios';import{useNavigate}from'react-router-dom';import Cookies from'js-cookie';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function AdminDashboard(){const navigate=useNavigate();const[bookings,setBookings]=useState([]);const[searchText,setSearchText]=useState('');useEffect(()=>{const userEmail=Cookies.get('xyzra');if(!userEmail){navigate('/signin');}},[navigate]);useEffect(()=>{// Get the JWT token from wherever you store it (localStorage, cookies, etc.)\nconst token=localStorage.getItem('jwt_token');// or Cookies.get('jwt_token');\nconsole.log(token);axios.get('https://localhost:7009/api/Home/GetBookedData',{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}}).then(response=>{setBookings(response.data);}).catch(error=>{console.error('There was an error fetching the data!',error);if(error.response&&error.response.status===401){// Redirect to login if unauthorized\nnavigate('/signin');}});},[navigate]);// Columns for the DataTable\nconst columns=[{name:'Booking ID',selector:row=>row.bookingId.toString(),// Convert to string\nsortable:true},{name:'Starting Destination',selector:row=>row.startingDestination,sortable:true},{name:'End Destination',selector:row=>row.endDestination,sortable:true},{name:'Phone',selector:row=>row.phone,sortable:true},{name:'Starting Date',selector:row=>row.startingDate,sortable:true,format:row=>new Date(row.startingDate).toLocaleDateString()},{name:'No of Days',selector:row=>row.noOfDays.toString(),// Convert to string\nsortable:true}];// Normalize and filter the data based on the search text\nconst filteredData=bookings.filter(item=>{const normalizedSearchText=searchText.trim().toLowerCase();// Normalize the search text\n// Search logic for all fields, treating everything as a string for comparison\nreturn(// Search by BookingId (converted to string)\nitem.bookingId.toString().toLowerCase().includes(normalizedSearchText)||// Search by NoOfDays (converted to string)\nitem.noOfDays.toString().toLowerCase().includes(normalizedSearchText)||// Search by Starting Destination\nitem.startingDestination&&item.startingDestination.toLowerCase().includes(normalizedSearchText)||// Search by End Destination\nitem.endDestination&&item.endDestination.toLowerCase().includes(normalizedSearchText)||// Search by Phone number\nitem.phone&&item.phone.toLowerCase().includes(normalizedSearchText)||// Search by Starting Date (Properly formatted date check)\nitem.startingDate&&new Date(item.startingDate).toLocaleDateString().toLowerCase().includes(normalizedSearchText));});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Home / Dashboard\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-bar\",style:{marginBottom:'20px'},children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by booking ID, destinations, phone, date or days...\",value:searchText,onChange:e=>setSearchText(e.target.value),style:{padding:'10px',width:'100%',maxWidth:'300px',marginBottom:'20px',borderRadius:'5px',border:'1px solid #ddd'}})}),/*#__PURE__*/_jsx(DataTable,{title:\"Booking Data\",columns:columns,data:filteredData// Apply the filtered data\n,pagination:true,highlightOnHover:true,striped:true,responsive:true,sortIcon:/*#__PURE__*/_jsx(\"span\",{className:\"sort-icon\",style:{fontSize:'18px',color:'#007bff'},children:\"\\u21C5\"})// Custom sorting icon\n})]})]})})});}export default AdminDashboard;","map":{"version":3,"names":["React","useState","useEffect","DataTable","axios","useNavigate","Cookies","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","navigate","bookings","setBookings","searchText","setSearchText","userEmail","get","token","localStorage","getItem","console","log","headers","then","response","data","catch","error","status","columns","name","selector","row","bookingId","toString","sortable","startingDestination","endDestination","phone","startingDate","format","Date","toLocaleDateString","noOfDays","filteredData","filter","item","normalizedSearchText","trim","toLowerCase","includes","children","className","style","marginBottom","type","placeholder","value","onChange","e","target","padding","width","maxWidth","borderRadius","border","title","pagination","highlightOnHover","striped","responsive","sortIcon","fontSize","color"],"sources":["D:/Projects/TAXI_Project/OnlineTAXIBooking/src/Pages/Admin/AdminDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport DataTable from 'react-data-table-component';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Cookies from 'js-cookie';\r\n\r\nfunction AdminDashboard() {\r\n  const navigate = useNavigate();\r\n  const [bookings, setBookings] = useState([]);\r\n  const [searchText, setSearchText] = useState('');\r\n\r\n  useEffect(() => {\r\n    const userEmail = Cookies.get('xyzra');\r\n    if (!userEmail) {\r\n\r\n      navigate('/signin');\r\n    }\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    // Get the JWT token from wherever you store it (localStorage, cookies, etc.)\r\n    const token = localStorage.getItem('jwt_token'); // or Cookies.get('jwt_token');\r\n   console.log(token)\r\n    axios.get('https://localhost:7009/api/Home/GetBookedData', {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(response => {\r\n      setBookings(response.data);\r\n    })\r\n    .catch(error => {\r\n      console.error('There was an error fetching the data!', error);\r\n      if (error.response && error.response.status === 401) {\r\n        // Redirect to login if unauthorized\r\n        navigate('/signin');\r\n      }\r\n    });\r\n  }, [navigate]);\r\n\r\n  // Columns for the DataTable\r\n  const columns = [\r\n    {\r\n      name: 'Booking ID',\r\n      selector: row => row.bookingId.toString(), // Convert to string\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Starting Destination',\r\n      selector: row => row.startingDestination,\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'End Destination',\r\n      selector: row => row.endDestination,\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Phone',\r\n      selector: row => row.phone,\r\n      sortable: true,\r\n    },\r\n    {\r\n      name: 'Starting Date',\r\n      selector: row => row.startingDate,\r\n      sortable: true,\r\n      format: row => new Date(row.startingDate).toLocaleDateString(),\r\n    },\r\n    {\r\n      name: 'No of Days',\r\n      selector: row => row.noOfDays.toString(), // Convert to string\r\n      sortable: true,\r\n    },\r\n  ];\r\n\r\n  // Normalize and filter the data based on the search text\r\n  const filteredData = bookings.filter(item => {\r\n    const normalizedSearchText = searchText.trim().toLowerCase(); // Normalize the search text\r\n\r\n    // Search logic for all fields, treating everything as a string for comparison\r\n    return (\r\n      // Search by BookingId (converted to string)\r\n      item.bookingId.toString().toLowerCase().includes(normalizedSearchText) ||\r\n\r\n      // Search by NoOfDays (converted to string)\r\n      item.noOfDays.toString().toLowerCase().includes(normalizedSearchText) ||\r\n\r\n      // Search by Starting Destination\r\n      (item.startingDestination && item.startingDestination.toLowerCase().includes(normalizedSearchText)) ||\r\n      \r\n      // Search by End Destination\r\n      (item.endDestination && item.endDestination.toLowerCase().includes(normalizedSearchText)) ||\r\n      \r\n      // Search by Phone number\r\n      (item.phone && item.phone.toLowerCase().includes(normalizedSearchText)) ||\r\n\r\n      // Search by Starting Date (Properly formatted date check)\r\n      (item.startingDate && new Date(item.startingDate).toLocaleDateString().toLowerCase().includes(normalizedSearchText))\r\n    );\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <div className=\"main-content\">\r\n        <main>\r\n          <div className=\"page-header\">\r\n            <h1>Dashboard</h1>\r\n            <small>Home / Dashboard</small>\r\n          </div>\r\n          <div className=\"page-content\">\r\n            {/* Search Input */}\r\n            <div className=\"search-bar\" style={{ marginBottom: '20px' }}>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search by booking ID, destinations, phone, date or days...\"\r\n                value={searchText}\r\n                onChange={(e) => setSearchText(e.target.value)}\r\n                style={{\r\n                  padding: '10px',\r\n                  width: '100%',\r\n                  maxWidth: '300px',\r\n                  marginBottom: '20px',\r\n                  borderRadius: '5px',\r\n                  border: '1px solid #ddd',\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            {/* DataTable */}\r\n            <DataTable\r\n              title=\"Booking Data\"\r\n              columns={columns}\r\n              data={filteredData} // Apply the filtered data\r\n              pagination\r\n              highlightOnHover\r\n              striped\r\n              responsive\r\n              sortIcon={<span className=\"sort-icon\" style={{ fontSize: '18px', color: '#007bff' }}>â‡…</span>} // Custom sorting icon\r\n            />\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,SAAS,KAAM,4BAA4B,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,OAAO,KAAM,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEhC,QAAS,CAAAC,cAAcA,CAAA,CAAG,CACxB,KAAM,CAAAC,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACU,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACgB,UAAU,CAAEC,aAAa,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CAEhDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,SAAS,CAAGb,OAAO,CAACc,GAAG,CAAC,OAAO,CAAC,CACtC,GAAI,CAACD,SAAS,CAAE,CAEdL,QAAQ,CAAC,SAAS,CAAC,CACrB,CACF,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEdZ,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAmB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAE;AAClDC,OAAO,CAACC,GAAG,CAACJ,KAAK,CAAC,CACjBjB,KAAK,CAACgB,GAAG,CAAC,+CAA+C,CAAE,CACzDM,OAAO,CAAE,CACP,eAAe,CAAE,UAAUL,KAAK,EAAE,CAClC,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CACDM,IAAI,CAACC,QAAQ,EAAI,CAChBZ,WAAW,CAACY,QAAQ,CAACC,IAAI,CAAC,CAC5B,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,EAAI,CACdP,OAAO,CAACO,KAAK,CAAC,uCAAuC,CAAEA,KAAK,CAAC,CAC7D,GAAIA,KAAK,CAACH,QAAQ,EAAIG,KAAK,CAACH,QAAQ,CAACI,MAAM,GAAK,GAAG,CAAE,CACnD;AACAlB,QAAQ,CAAC,SAAS,CAAC,CACrB,CACF,CAAC,CAAC,CACJ,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd;AACA,KAAM,CAAAmB,OAAO,CAAG,CACd,CACEC,IAAI,CAAE,YAAY,CAClBC,QAAQ,CAAEC,GAAG,EAAIA,GAAG,CAACC,SAAS,CAACC,QAAQ,CAAC,CAAC,CAAE;AAC3CC,QAAQ,CAAE,IACZ,CAAC,CACD,CACEL,IAAI,CAAE,sBAAsB,CAC5BC,QAAQ,CAAEC,GAAG,EAAIA,GAAG,CAACI,mBAAmB,CACxCD,QAAQ,CAAE,IACZ,CAAC,CACD,CACEL,IAAI,CAAE,iBAAiB,CACvBC,QAAQ,CAAEC,GAAG,EAAIA,GAAG,CAACK,cAAc,CACnCF,QAAQ,CAAE,IACZ,CAAC,CACD,CACEL,IAAI,CAAE,OAAO,CACbC,QAAQ,CAAEC,GAAG,EAAIA,GAAG,CAACM,KAAK,CAC1BH,QAAQ,CAAE,IACZ,CAAC,CACD,CACEL,IAAI,CAAE,eAAe,CACrBC,QAAQ,CAAEC,GAAG,EAAIA,GAAG,CAACO,YAAY,CACjCJ,QAAQ,CAAE,IAAI,CACdK,MAAM,CAAER,GAAG,EAAI,GAAI,CAAAS,IAAI,CAACT,GAAG,CAACO,YAAY,CAAC,CAACG,kBAAkB,CAAC,CAC/D,CAAC,CACD,CACEZ,IAAI,CAAE,YAAY,CAClBC,QAAQ,CAAEC,GAAG,EAAIA,GAAG,CAACW,QAAQ,CAACT,QAAQ,CAAC,CAAC,CAAE;AAC1CC,QAAQ,CAAE,IACZ,CAAC,CACF,CAED;AACA,KAAM,CAAAS,YAAY,CAAGjC,QAAQ,CAACkC,MAAM,CAACC,IAAI,EAAI,CAC3C,KAAM,CAAAC,oBAAoB,CAAGlC,UAAU,CAACmC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAE;AAE9D;AACA,OACE;AACAH,IAAI,CAACb,SAAS,CAACC,QAAQ,CAAC,CAAC,CAACe,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,oBAAoB,CAAC,EAEtE;AACAD,IAAI,CAACH,QAAQ,CAACT,QAAQ,CAAC,CAAC,CAACe,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,oBAAoB,CAAC,EAErE;AACCD,IAAI,CAACV,mBAAmB,EAAIU,IAAI,CAACV,mBAAmB,CAACa,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,oBAAoB,CAAE,EAEnG;AACCD,IAAI,CAACT,cAAc,EAAIS,IAAI,CAACT,cAAc,CAACY,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,oBAAoB,CAAE,EAEzF;AACCD,IAAI,CAACR,KAAK,EAAIQ,IAAI,CAACR,KAAK,CAACW,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,oBAAoB,CAAE,EAEvE;AACCD,IAAI,CAACP,YAAY,EAAI,GAAI,CAAAE,IAAI,CAACK,IAAI,CAACP,YAAY,CAAC,CAACG,kBAAkB,CAAC,CAAC,CAACO,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACH,oBAAoB,CAAE,EAExH,CAAC,CAAC,CAEF,mBACE3C,IAAA,CAAAI,SAAA,EAAA2C,QAAA,cACE/C,IAAA,QAAKgD,SAAS,CAAC,cAAc,CAAAD,QAAA,cAC3B7C,KAAA,SAAA6C,QAAA,eACE7C,KAAA,QAAK8C,SAAS,CAAC,aAAa,CAAAD,QAAA,eAC1B/C,IAAA,OAAA+C,QAAA,CAAI,WAAS,CAAI,CAAC,cAClB/C,IAAA,UAAA+C,QAAA,CAAO,kBAAgB,CAAO,CAAC,EAC5B,CAAC,cACN7C,KAAA,QAAK8C,SAAS,CAAC,cAAc,CAAAD,QAAA,eAE3B/C,IAAA,QAAKgD,SAAS,CAAC,YAAY,CAACC,KAAK,CAAE,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAH,QAAA,cAC1D/C,IAAA,UACEmD,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,4DAA4D,CACxEC,KAAK,CAAE5C,UAAW,CAClB6C,QAAQ,CAAGC,CAAC,EAAK7C,aAAa,CAAC6C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC/CJ,KAAK,CAAE,CACLQ,OAAO,CAAE,MAAM,CACfC,KAAK,CAAE,MAAM,CACbC,QAAQ,CAAE,OAAO,CACjBT,YAAY,CAAE,MAAM,CACpBU,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,gBACV,CAAE,CACH,CAAC,CACC,CAAC,cAGN7D,IAAA,CAACL,SAAS,EACRmE,KAAK,CAAC,cAAc,CACpBrC,OAAO,CAAEA,OAAQ,CACjBJ,IAAI,CAAEmB,YAAc;AAAA,CACpBuB,UAAU,MACVC,gBAAgB,MAChBC,OAAO,MACPC,UAAU,MACVC,QAAQ,cAAEnE,IAAA,SAAMgD,SAAS,CAAC,WAAW,CAACC,KAAK,CAAE,CAAEmB,QAAQ,CAAE,MAAM,CAAEC,KAAK,CAAE,SAAU,CAAE,CAAAtB,QAAA,CAAC,QAAC,CAAM,CAAG;AAAA,CAChG,CAAC,EACC,CAAC,EACF,CAAC,CACJ,CAAC,CACN,CAAC,CAEP,CAEA,cAAe,CAAA1C,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}