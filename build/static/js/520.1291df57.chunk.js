"use strict";(self.webpackChunkmyproject=self.webpackChunkmyproject||[]).push([[520],{520:(e,r,s)=>{s.r(r),s.d(r,{default:()=>u});var a=s(43),n=s(213),o=s(64),i=s.n(o),t=s(906),d=s(892),l=s(899),c=s(880),p=s(579);const u=function(){const e=(0,t.Zp)();(0,a.useEffect)((()=>{c.A.get("xyzra")||e("/signin")}),[e]);const r=(0,d.Wx)({initialValues:{email:"",password:"",otp:""},validationSchema:l.Ik({email:l.Yj().email("Invalid email format").required("Email is required."),password:l.Yj().required("Password is required."),otp:l.Yj().required("OTP is required.")})}),[s,o]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[h,f]=(0,a.useState)(""),[x,g]=(0,a.useState)(!1),[v,b]=(0,a.useState)(!0),[y,w]=(0,a.useState)(!1),[j,P]=(0,a.useState)("");return(0,p.jsx)("div",{className:"body",children:(0,p.jsxs)("div",{className:"forget-password-container",children:[(0,p.jsx)("h1",{children:"Forgot Password"}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,p.jsx)("input",{type:"email",id:"email",name:"email",value:s,onChange:e=>o(e.target.value),disabled:x,required:!0}),r.touched.email&&r.errors.email?(0,p.jsx)("div",{className:"error",children:r.errors.email}):null,!x&&(0,p.jsx)("button",{onClick:async()=>{try{const e=await n.A.post(`https://localhost:7009/api/Home/verifyemail/${s}`);200===e.status&&(i().fire("Success","Email verified! Please enter the OTP sent to your email.","success"),g(!0),b(!1),w(!1),P(e.data.otp))}catch(a){var e,r;i().fire("Error",(null===(e=a.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Failed to verify email. Try again.","error")}},className:"btn-primary",children:"Verify Email"})]}),!1===v&&(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"otp",children:"OTP:"}),(0,p.jsx)("input",{type:"text",id:"otp",name:"otp",value:u,onChange:e=>m(e.target.value),disabled:v,required:!0}),r.touched.otp&&r.errors.otp?(0,p.jsx)("div",{className:"error",children:r.errors.otp}):null,!v&&(0,p.jsx)("button",{onClick:async()=>{try{200===(await n.A.post(`https://localhost:7009/api/Home/verifyotp/${u}/${j}`)).status&&(i().fire("Success","OTP verified! Please enter your new password.","success"),b(!0),w(!0))}catch(s){var e,r;i().fire("Error",(null===(e=s.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||"Invalid OTP. Try again.","error")}},className:"btn-primary",children:"Verify OTP"})]}),y&&(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"password",children:"New Password:"}),(0,p.jsx)("input",{type:"password",id:"password",name:"password",value:h,onChange:e=>f(e.target.value),required:!0}),r.touched.password&&r.errors.password?(0,p.jsx)("div",{className:"error",children:r.errors.password}):null,(0,p.jsx)("button",{onClick:async()=>{try{200===(await n.A.post(`https://localhost:7009/api/Home/resetpassword/${s}/${h}`)).status&&(i().fire("Success","Password reset successfully!","success"),e("/signin"))}catch(o){var r,a;i().fire("Error",(null===(r=o.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to reset password. Try again.","error")}},className:"btn-primary",children:"Reset Password"})]}),(0,p.jsx)("style",{children:"\n          .error {\n            color: red;\n            font-size: 0.9rem;\n            margin-top: 5px;\n          }\n          .body {\n            font-family: 'Poppins', Arial, sans-serif;\n            background: linear-gradient(135deg, #3498db, #8e44ad);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 100vh;\n            overflow: hidden;\n          }\n          .forget-password-container {\n            width: 100%;\n            max-width: 400px;\n            margin: 0 auto;\n            padding: 20px;\n            border: 1px solid #ddd;\n            border-radius: 8px;\n            background: #f9f9f9;\n            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n          }\n          h1 {\n            text-align: center;\n            margin-bottom: 20px;\n            color: #333;\n          }\n          .form-group {\n            margin-bottom: 15px;\n          }\n          label {\n            display: block;\n            margin-bottom: 5px;\n            font-size: 1rem;\n            color: #555;\n          }\n          input {\n            width: 100%;\n            padding: 10px;\n            border: 1px solid #ddd;\n            border-radius: 5px;\n            font-size: 1rem;\n          }\n          .btn-primary {\n            margin-top: 10px;\n            width: 100%;\n            padding: 10px;\n            border: none;\n            border-radius: 5px;\n            background: #3498db;\n            color: #fff;\n            font-size: 1rem;\n            cursor: pointer;\n          }\n          .btn-primary:hover {\n            background: #2980b9;\n          }\n        "})]})})}}}]);
//# sourceMappingURL=520.1291df57.chunk.js.map